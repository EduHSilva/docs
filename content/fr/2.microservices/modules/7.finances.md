---
title: Finan√ßas
description: Documenta√ß√£o do m√≥dulo de finan√ßas
navigation:
  icon: i-lucide-banknote
seo:
  description: Documenta√ß√£o do m√≥dulo de finan√ßas
---

# Objetivo
Gerenciar **usu√°rios e autentica√ß√£o**.

# Responsabilidades
- Autenticar usu√°rios
- Emitir e validar JWT
- Gerenciar roles e status de usu√°rios
- Integrar com m√≥dulo de e-mail para confirma√ß√£o

# Autentica√ß√£o
Todas as rotas protegidas exigem o header:
```
Authorization: Bearer {token}
```
Obtido a partir da rota de login

::note
üîí Rota autenticada  
üîì Rota p√∫blica
::

# Rotas
## auth
### üîí me
Rota que deve ser utilizada em middlewares para verificar autentifica√ß√£o

```http request
GET http://localhost:8080/users/auth/me
Authorization: Bearer {token}
```
```json
{
  "data": {
    "id": "fedf607f-0fd1-4c82-ace4-c36408002400",
    "username": "Eduardo Henrique",
    "email": "edu.slhenrique@gmail.com",
    "token": null
  },
  "links": null,
  "message": "Auth successfully verified"
}
```

### üîì login
Rota a ser utilizada para realizar a autentifica√ß√£o do usu√°rio

::warning
Esta rota **n√£o permite** login de usu√°rios sem confirma√ß√£o.
Veja a [regra de neg√≥cio](#rn3).
::

```http request
POST http://localhost:8080/users/auth/login
Content-Type: application/json

{
  "email": "edu.slhenrique@gmail.com","password": "12345678"
}
```

```json
{
  "data": {
    "id": "fedf607f-0fd1-4c82-ace4-c36408002400",
    "username": "Eduardo Henrique",
    "email": "edu.slhenrique@gmail.com",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhdXRoIiwic3ViIjoiZmVkZjYwN2YtMGZkMS00YzgyLWFjZTQtYzM2NDA4MDAyNDAwIiwiZXhwIjoxNzY2NDYwNzUyfQ.UbkVFMbgvJ_DbQ9fFQ3ElRNAImBS8ct7yNmFi4tMVBo"
  },
  "links": null,
  "message": "Auth successfully verified"
}
```
## user
### üîí all
Rota responsavel por listar todos usuarios.

::warning
Esta rota **exige role ADMIN**.
Veja a [regra de neg√≥cio](#rn4).
::

```http request
GET http://localhost:8080/users
Authorization: Bearer {token}
```
```json
{
  "data": {
    "items": [
      {
        "createdDate": "2020-01-01T03:00:00.000Z",
        "email": "edu.slhenrique@gmail.com",
        "id": "fedf607f-0fd1-4c82-ace4-c36408002400",
        "role": "ADMIN",
        "status": "OK",
        "username": "Eduardo Henrique"
      }
    ],
    "page": 0,
    "size": 10,
    "total": 1
  },
  "links": {
    "self": "/users?page=0&size=10"
  },
  "message": "Find all users successfully"
}
```
### üîí findOne
Rota responsavel por buscar um usuario por id
```http request
GET http://localhost:8080/users/{id}
Authorization: Bearer {token}
```
```json
{
  "data": {
    "createdDate": "2020-01-01T03:00:00.000Z",
    "email": "edu.slhenrique@gmail.com",
    "id": "fedf607f-0fd1-4c82-ace4-c36408002400",
    "role": "ADMIN",
    "status": "OK",
    "username": "Eduardo Henrique"
  },
  "links": {
    "edit": "/users/fedf607f-0fd1-4c82-ace4-c36408002400",
    "self": "/users/fedf607f-0fd1-4c82-ace4-c36408002400",
    "delete": "/users/fedf607f-0fd1-4c82-ace4-c36408002400"
  },
  "message": "User find successfully"
}
```
### üîí save
Rota responsavel por salvar um novo usu√°rio

::warning
Esta rota **n√£o permite** cria√ß√£o de usu√°rios com role `ADMIN`.
Veja a [regra de neg√≥cio](#rn1).
::
::warning
Todo usu√°rio √© criado bloqueado.
Veja a [regra de neg√≥cio](#rn2).
::


```http request
POST http://localhost:8080/users/{id}
Authorization: Bearer {token}

{
"email": "teste@gmail.com","password": "12345678", "username": "Teste", "role": "CRM"
}
```

```json
{
    "data": {
        "createdDate": null,
        "email": "teste@gmail.com",
        "id": "b14be8e7-8a43-42c5-b84a-5f433a4c01a0",
        "role": "CRM",
        "status": "WAITING_CONFIRMATION",
        "username": "Teste"
    },
    "links": {
        "edit": "/users/b14be8e7-8a43-42c5-b84a-5f433a4c01a0",
        "self": "/users/b14be8e7-8a43-42c5-b84a-5f433a4c01a0",
        "delete": "/users/b14be8e7-8a43-42c5-b84a-5f433a4c01a0"
    },
    "message": "User successfully saved"
}
```

### üîì confirm
Rota responsavel por confirmar o usu√°rio, utilizada no modulo de e-mail

```http request
GET http://localhost:8080/users/confirm/{id}
```

A resposta √© um redirect para tela de sucesso.

#### üîí update
Rota responsavel pela edi√ß√£o do usu√°rio
Campos atualizaveis:
- username
```http request
PUT http://localhost:8080/users/confirm/{id}
Authorization: Bearer {token}
```

```json
{
    "data": {
        "createdDate": "2025-12-23T01:44:58.572Z",
        "email": "teste@gmail.com",
        "id": "b14be8e7-8a43-42c5-b84a-5f433a4c01a0",
        "role": "CRM",
        "status": "OK",
        "username": "teste1"
    },
    "links": {
        "edit": "/users/b14be8e7-8a43-42c5-b84a-5f433a4c01a0",
        "self": "/users/b14be8e7-8a43-42c5-b84a-5f433a4c01a0",
        "delete": "/users/b14be8e7-8a43-42c5-b84a-5f433a4c01a0"
    },
    "message": "User successfully updated"
}
```
### üîí delete
Rota responsavel por deletar um user
```http request
DELETE http://localhost:8080/users/confirm/{id}
Authorization: Bearer {token}
```
```json
{
"data": null,
"links": null,
"message": "User successfully deleted"
}

```

## Regras de Neg√≥cio
#### RN1
Usu√°rios com role `ADMIN` n√£o podem ser criados via HTTP por quest√µes de seguran√ßa.

#### RN2
Todo usu√°rio criado permanece bloqueado at√© confirma√ß√£o.

#### RN3
O usu√°rio s√≥ pode autenticar ap√≥s confirma√ß√£o.

#### RN4
Apenas usu√°rios com role `ADMIN` podem listar todos os usu√°rios.

#### RN5
Cada m√≥dulo do sistema deve possuir uma role espec√≠fica.

## Observa√ß√µes
- As roles s√£o definidas no enum `UserRole` e devem ser atualizadas manualmente ao criar novos m√≥dulos.
- Caso o m√≥dulo de e-mail n√£o seja utilizado, a confirma√ß√£o deve ser feita manualmente via endpoint.
