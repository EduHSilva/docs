---
title: CRM
description: Documenta√ß√£o do m√≥dulo de Customer Relationship Management (CRM).
navigation:
  icon: i-lucide-kanban
seo:
  description: Documenta√ß√£o t√©cnica do m√≥dulo de CRM, abrangendo o gerenciamento de clientes, or√ßamentos e servi√ßos.
---

# Objetivo

O m√≥dulo de **CRM (Customer Relationship Management)** tem como objetivo centralizar e gerenciar o relacionamento com o cliente, abrangendo o ciclo de vida desde o primeiro contato at√© a conclus√£o de servi√ßos. Ele √© respons√°vel por gerenciar **clientes, or√ßamentos e servi√ßos** de forma integrada.

# Responsabilidades

As principais responsabilidades deste m√≥dulo incluem:

- **Gerenciamento de Clientes:** Manter o cadastro e o ciclo de vida dos clientes.
- **Gera√ß√£o e Acompanhamento de Or√ßamentos:** Criar, enviar e monitorar o status dos or√ßamentos propostos.
- **Gest√£o de Servi√ßos:** Gerenciar a execu√ß√£o e o status dos servi√ßos contratados.

# Rotas da API

A seguir, s√£o detalhadas as rotas dispon√≠veis na API para intera√ß√£o com o m√≥dulo de CRM. O prefixo de todas as rotas √© `/crm`.

## Clientes (`/clients`)

### üîí `getAll`

Rota respons√°vel por listar todos os clientes cadastrados.

#### Par√¢metros Opcionais
- `name`: Filtra clientes por nome.
- `status`: Filtra clientes por status (ex: `NEW`, `ACTIVE`).

```http request
GET {{url}}/crm/clients
Authorization: Bearer {token}
```

**Resposta de Sucesso (200 OK):**

```json
{
  "data": {
    "items": [
      {
        "email": "edu.slhenrique@gmail.com",
        "id": "b0a7d0e8-0409-49c0-b942-5dc80a280239",
        "name": "EDUARDO H SILVA",
        "observations": "",
        "phone": "16992388972",
        "status": "NEW"
      }
    ],
    "page": 0,
    "size": 10,
    "total": 1
  },
  "links": {
    "self": "/crm/clients?page=0&size=10"
  },
  "message": "Clientes encontrados com sucesso."
}
```

### üîí `save`

Rota respons√°vel por criar um novo cliente.

```http request
POST {{url}}/crm/clients
Content-Type: application/json

{
    "email": "edu.slhenrique@gmail.com",
    "name": "EDUARDO H SILVA",
    "observations": "teste",
    "phone": "16992388972"
}
```

**Resposta de Sucesso (201 Created):**

```json
{
  "data": {
    "email": "edu.slhenrique@gmail.com",
    "id": "f41ae76f-8e2e-4cca-818c-1fab8e94ec42",
    "name": "EDUARDO H SILVA",
    "observations": "teste",
    "phone": "16992388972",
    "status": "NEW"
  },
  "links": {
    "edit": "/crm/clients/f41ae76f-8e2e-4cca-818c-1fab8e94ec42",
    "self": "/crm/clients/f41ae76f-8e2e-4cca-818c-1fab8e94ec42",
    "delete": "/crm/clients/f41ae76f-8e2e-4cca-818c-1fab8e94ec42"
  },
  "message": "Cliente salvo com sucesso."
}
```

### üîí `findOne`

Rota respons√°vel por buscar um cliente espec√≠fico pelo seu ID.

```http request
GET {{url}}/crm/clients/{id}
Authorization: Bearer {token}
```

**Resposta de Sucesso (200 OK):**

```json
{
  "data": {
    "email": "edu.slhenrique@gmail.com",
    "id": "b0a7d0e8-0409-49c0-b942-5dc80a280239",
    "name": "EDUARDO H SILVA",
    "observations": "",
    "phone": "16992388972",
    "status": "NEW"
  },
  "links": {
    "edit": "/crm/clients/b0a7d0e8-0409-49c0-b942-5dc80a280239",
    "self": "/crm/clients/b0a7d0e8-0409-49c0-b942-5dc80a280239",
    "delete": "/crm/clients/b0a7d0e8-0409-49c0-b942-5dc80a280239"
  },
  "message": "Cliente encontrado com sucesso."
}
```

### üîí `delete`

Rota respons√°vel por deletar um cliente.

```http request
DELETE {{url}}/crm/clients/{id}
Authorization: Bearer {token}
```

**Resposta de Sucesso (200 OK):**

```json
{
"data": null,
"links": null,
"message": "Cliente deletado com sucesso."
}
```

### üîí `update`

Rota respons√°vel por atualizar as informa√ß√µes de um cliente.

```http request
PUT {{url}}/crm/clients/{id}
Authorization: Bearer {token}
Content-Type: application/json

{
    "observations": "teste1"
}
```

**Resposta de Sucesso (200 OK):**

```json
{
  "data": {
    "email": "edu.slhenrique@gmail.com",
    "id": "b0a7d0e8-0409-49c0-b942-5dc80a280239",
    "name": "EDUARDO H SILVA",
    "observations": "teste1",
    "phone": "16992388972",
    "status": "NEW"
  },
  "links": {
    "edit": "/crm/clients/b0a7d0e8-0409-49c0-b942-5dc80a280239",
    "self": "/crm/clients/b0a7d0e8-0409-49c0-b942-5dc80a280239",
    "delete": "/crm/clients/b0a7d0e8-0409-49c0-b942-5dc80a280239"
  },
  "message": "Cliente atualizado com sucesso."
}
```

## Or√ßamentos (`/budgets`)

### üîí `getAll`

Rota respons√°vel por listar todos os or√ßamentos.

#### Par√¢metros Opcionais
- `status`: Filtra or√ßamentos por status (ex: `DRAFT`, `APPROVED`, `REJECTED`).
- `title`: Filtra or√ßamentos por t√≠tulo.

```http request
GET {{url}}/crm/budgets
Authorization: Bearer {token}
```

**Resposta de Sucesso (200 OK):**

```json
{
  "data": {
    "items": [
      {
        "client": "b0a7d0e8-0409-49c0-b942-5dc80a280239",
        "clientName": "EDUARDO H SILVA",
        "createdDate": "2025-12-13T16:23:54.353Z",
        "description": "Formatar e ativar, office incluso",
        "id": "7db0283e-c61b-453c-88d7-fb72769992be",
        "items": [
          {
            "description": "a",
            "id": "97ff00f5-f186-456c-ab97-0d188660adf0",
            "name": "Formata√ß√£o",
            "price": 80.0,
            "quantity": 1,
            "subTotal": 80.0
          },
          {
            "description": "a",
            "id": "19c30892-2a47-4db3-bb30-4be21c5e2ed9",
            "name": "Office",
            "price": 20.0,
            "quantity": 1,
            "subTotal": 20.0
          }
        ],
        "observations": "teste",
        "status": "APPROVED",
        "terms": "teste",
        "title": "Formata√ß√£o PC",
        "total": 100.0,
        "validate": 30
      }
    ],
    "page": 0,
    "size": 10,
    "total": 2
  },
  "links": {
    "self": "/crm/budgets?page=0&size=10"
  },
  "message": "Or√ßamentos encontrados com sucesso."
}
```

### üîí `save`

Rota respons√°vel por criar um novo or√ßamento.

::warning
Todos os or√ßamentos s√£o criados inicialmente com o status de **rascunho (`DRAFT`)**. Consulte a [regra de neg√≥cio](#rn1-status-inicial-do-or√ßamento).
::

```http request
POST {{url}}/crm/budgets
Content-Type: application/json

{
    "client": "b0a7d0e8-0409-49c0-b942-5dc80a280239",
    "description": "Formatar e ativar, office incluso",
    "items": [
        {
            "description": "a",
            "name": "Formata√ß√£o",
            "price": 80.0,
            "quantity": 1
          },
        {
            "description": "a",
            "name": "Office",
            "price": 20.0,
            "quantity": 1
          }
        ],
    "observations": "teste",
    "terms": "teste",
    "title": "Formata√ß√£o PC",
    "total": 100.0,
    "validate": 30
}
```

**Resposta de Sucesso (201 Created):**

```json
{
  "data": {
    "client": "b0a7d0e8-0409-49c0-b942-5dc80a280239",
    "clientName": "EDUARDO H SILVA",
    "createdDate": null,
    "description": "Formatar e ativar, office incluso",
    "id": "6a71aead-89b6-430f-a2c7-74da88972e71",
    "items": [
      {
        "description": "a",
        "id": "979c7db1-cdf8-441f-ab1f-53c55ce803f9",
        "name": "Formata√ß√£o",
        "price": 80.0,
        "quantity": 1,
        "subTotal": 80.0
      },
      {
        "description": "a",
        "id": "2e96bb73-bc10-459a-a1ab-fc2abe66698d",
        "name": "Office",
        "price": 20.0,
        "quantity": 1,
        "subTotal": 20.0
      }
    ],
    "observations": "teste",
    "status": "DRAFT",
    "terms": "teste",
    "title": "Formata√ß√£o PC",
    "total": 100.0,
    "validate": 30
  },
  "links": {
    "edit": "/crm/budgets/6a71aead-89b6-430f-a2c7-74da88972e71",
    "self": "/crm/budgets/6a71aead-89b6-430f-a2c7-74da88972e71",
    "delete": "/crm/budgets/6a71aead-89b6-430f-a2c7-74da88972e71"
  },
  "message": "Or√ßamento salvo com sucesso."
}
```

### üîí `findOne`

Rota respons√°vel por buscar um or√ßamento espec√≠fico pelo seu ID.

```http request
GET {{url}}/crm/budgets/{id}
Authorization: Bearer {token}
```

**Resposta de Sucesso (200 OK):**

```json
{
    "data": {
        "client": "b0a7d0e8-0409-49c0-b942-5dc80a280239",
        "clientName": "EDUARDO H SILVA",
        "createdDate": "2025-12-26T02:01:08.930Z",
        "description": "Formatar e ativar, office incluso",
        "id": "6a71aead-89b6-430f-a2c7-74da88972e71",
        "items": [
            {
                "description": "a",
                "id": "0df92594-45f5-4bc6-a2bd-d16049dca0b6",
                "name": "Formata√ß√£o",
                "price": 80.0,
                "quantity": 1,
                "subTotal": 80.0
            }
        ],
        "observations": "teste1",
        "status": "DRAFT",
        "terms": "teste1",
        "title": "Formata√ß√£o PC1",
        "total": 80.0,
        "validate": 30
    },
    "links": {
        "edit": "/crm/budgets/6a71aead-89b6-430f-a2c7-74da88972e71",
        "self": "/crm/budgets/6a71aead-89b6-430f-a2c7-74da88972e71",
        "delete": "/crm/budgets/6a71aead-89b6-430f-a2c7-74da88972e71"
    },
    "message": "Or√ßamento encontrado com sucesso."
}
```

### üîí `delete`

Rota respons√°vel por deletar um or√ßamento.

```http request
DELETE {{url}}/crm/budgets/{id}
Authorization: Bearer {token}
```

**Resposta de Sucesso (200 OK):**

```json
{
"data": null,
"links": null,
"message": "Or√ßamento deletado com sucesso."
}
```

### üîí `update`

Rota respons√°vel por atualizar as informa√ß√µes de um or√ßamento.

```http request
PUT {{url}}/crm/budgets/{id}
Authorization: Bearer {token}
Content-Type: application/json

{
    "description": "Formatar e ativar, office incluso",
    "items": [
        {
            "description": "a",
            "name": "Formata√ß√£o",
            "price": 80.0,
            "quantity": 1
          }
        ],
    "observations": "teste1",
    "status": "DRAFT",
    "terms": "teste1",
    "title": "Formata√ß√£o PC1",
    "total": 100.0,
    "validate": 30
}
```

**Resposta de Sucesso (200 OK):**

```json
{
  "data": {
    "client": "b0a7d0e8-0409-49c0-b942-5dc80a280239",
    "clientName": "EDUARDO H SILVA",
    "createdDate": "2025-12-26T02:01:08.930Z",
    "description": "Formatar e ativar, office incluso",
    "id": "6a71aead-89b6-430f-a2c7-74da88972e71",
    "items": [
      {
        "description": "a",
        "id": "92d98194-653a-4762-8cea-660e77bf8740",
        "name": "Formata√ß√£o",
        "price": 80.0,
        "quantity": 1,
        "subTotal": 80.0
      }
    ],
    "observations": "teste1",
    "status": "DRAFT",
    "terms": "teste1",
    "title": "Formata√ß√£o PC1",
    "total": 80.0,
    "validate": 30
  },
  "links": {
    "edit": "/crm/budgets/6a71aead-89b6-430f-a2c7-74da88972e71",
    "self": "/crm/budgets/6a71aead-89b6-430f-a2c7-74da88972e71",
    "delete": "/crm/budgets/6a71aead-89b6-430f-a2c7-74da88972e71"
  },
  "message": "Or√ßamento atualizado com sucesso."
}
```

## Dashboard (`/dashboard`)

### üîí `getData`

Rota respons√°vel por buscar os dados consolidados para o dashboard principal, fornecendo m√©tricas e servi√ßos recentes.

```http request
GET {{url}}/crm/dashboard
Authorization: Bearer {token}
```

**Resposta de Sucesso (200 OK):**

```json
{
  "data": {
    "pendingServices": 1,
    "recentServices": [
      {
        "client": "b0a7d0e8-0409-49c0-b942-5dc80a280239",
        "clientName": "EDUARDO H SILVA",
        "createdDate": "2025-12-26T02:01:08.930Z",
        "description": "Formatar e ativar, office incluso",
        "id": "6a71aead-89b6-430f-a2c7-74da88972e71",
        "items": [
          {
            "description": "a",
            "id": "92d98194-653a-4762-8cea-660e77bf8740",
            "name": "Formata√ß√£o",
            "price": 80.0,
            "quantity": 1,
            "subTotal": 80.0
          }
        ],
        "observations": "teste1",
        "status": "DRAFT",
        "terms": "teste1",
        "title": "Formata√ß√£o PC1",
        "total": 80.0,
        "validate": 30
      },
      {
        "client": "b0a7d0e8-0409-49c0-b942-5dc80a280239",
        "clientName": "EDUARDO H SILVA",
        "createdDate": "2025-12-13T16:23:54.353Z",
        "description": "Formatar e ativar, office incluso",
        "id": "7db0283e-c61b-453c-88d7-fb72769992be",
        "items": [
          {
            "description": "a",
            "id": "97ff00f5-f186-456c-ab97-0d188660adf0",
            "name": "Formata√ß√£o",
            "price": 80.0,
            "quantity": 1,
            "subTotal": 80.0
          },
          {
            "description": "a",
            "id": "19c30892-2a47-4db3-bb30-4be21c5e2ed9",
            "name": "Office",
            "price": 20.0,
            "quantity": 1,
            "subTotal": 20.0
          }
        ],
        "observations": "teste",
        "status": "APPROVED",
        "terms": "teste",
        "title": "Formata√ß√£o PC",
        "total": 100.0,
        "validate": 30
      }
    ],
    "totalClients": 1,
    "totalReceived": 13.0,
    "workingServices": 0
  },
  "links": null,
  "message": "Dados do dashboard encontrados com sucesso."
}
```

### üîí `getDataKanban`

Rota respons√°vel por buscar os dados organizados no formato Kanban, ideal para visualiza√ß√£o do fluxo de trabalho.

```http request
GET {{url}}/crm/dashboard/kanban
Authorization: Bearer {token}
```

**Resposta de Sucesso (200 OK):**

```json
{
  "data": {
    "news": [
      {
        "client": "b0a7d0e8-0409-49c0-b942-5dc80a280239",
        "clientName": "EDUARDO H SILVA",
        "createdDate": "2025-12-13T16:23:54.353Z",
        "description": "Formatar e ativar, office incluso",
        "id": "7db0283e-c61b-453c-88d7-fb72769992be",
        "items": [
          {
            "description": "a",
            "id": "97ff00f5-f186-456c-ab97-0d188660adf0",
            "name": "Formata√ß√£o",
            "price": 80.0,
            "quantity": 1,
            "subTotal": 80.0
          },
          {
            "description": "a",
            "id": "19c30892-2a47-4db3-bb30-4be21c5e2ed9",
            "name": "Office",
            "price": 20.0,
            "quantity": 1,
            "subTotal": 20.0
          }
        ],
        "observations": "teste",
        "status": "APPROVED",
        "terms": "teste",
        "title": "Formata√ß√£o PC",
        "total": 100.0,
        "validate": 30
      }
    ],
    "working": [],
    "done": [
      {
        "client": "b0a7d0e8-0409-49c0-b942-5dc80a280239",
        "clientName": "EDUARDO H SILVA",
        "createdDate": "2025-12-10T00:09:25.198Z",
        "description": "sdad",
        "id": "b7eb19bd-0136-4c4d-b5ff-31fb97dd16b7",
        "items": [
          {
            "description": "2",
            "id": "8e6c694c-45ff-437b-ad12-f30aff6c64ff",
            "name": "1",
            "price": 1.0,
            "quantity": 13,
            "subTotal": 13.0
          }
        ],
        "observations": "dsa",
        "status": "DONE",
        "terms": "dsad",
        "title": "teste",
        "total": 13.0,
        "validate": 1
      }
    ]
  },
  "links": null,
  "message": "Dados do Kanban encontrados com sucesso."
}
```

## Regras de Neg√≥cio

#### RN1: Status Inicial do Or√ßamento
Todo or√ßamento criado via API √© inicializado com o status de **rascunho (`DRAFT`)**. Ele deve ser explicitamente alterado para um status ativo (ex: `PENDING`, `APPROVED`) em uma etapa posterior.

## Observa√ß√µes

- **Integra√ß√£o com Usu√°rios:** O m√≥dulo de CRM depende do m√≥dulo de Usu√°rios para autentica√ß√£o e autoriza√ß√£o, utilizando o token JWT para proteger as rotas.
- **Estrutura de Dados:** Os or√ßamentos s√£o compostos por uma lista de itens, permitindo detalhamento de servi√ßos e produtos.
- **Flexibilidade de Status:** O status dos clientes, or√ßamentos e servi√ßos pode ser estendido conforme a necessidade do neg√≥cio.
