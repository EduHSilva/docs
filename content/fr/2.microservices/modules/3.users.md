---
title: Users
description: Documenta칞칚o do m칩dulo de usu치rios
navigation:
  icon: i-lucide-user
seo:
  description: Documenta칞칚o do m칩dulo de usu치rios
---

# Objetivo
Gerenciar **usu치rios e autentica칞칚o**.

# Responsabilidades
- Autenticar usu치rios
- Emitir e validar JWT
- Gerenciar roles e status de usu치rios
- Integrar com m칩dulo de e-mail para confirma칞칚o

# Autentica칞칚o
Todas as rotas protegidas exigem o header:
```
Authorization: Bearer {token}
```
Obtido a partir da rota de login

::note
游 Rota autenticada  
游댑 Rota p칰blica
::

# Rotas
## auth
### 游 me
Rota que deve ser utilizada em middlewares para verificar autentifica칞칚o

```http request
GET http://localhost:8080/users/auth/me
Authorization: Bearer {token}
```
```json
{
  "data": {
    "id": "fedf607f-0fd1-4c82-ace4-c36408002400",
    "username": "Eduardo Henrique",
    "email": "edu.slhenrique@gmail.com",
    "token": null
  },
  "links": null,
  "message": "Auth successfully verified"
}
```

### 游댑 login
Rota a ser utilizada para realizar a autentifica칞칚o do usu치rio

::warning
Esta rota **n칚o permite** login de usu치rios sem confirma칞칚o.
Veja a [regra de neg칩cio](#rn3).
::

```http request
POST http://localhost:8080/users/auth/login
Content-Type: application/json

{
  "email": "edu.slhenrique@gmail.com","password": "12345678"
}
```

```json
{
  "data": {
    "id": "fedf607f-0fd1-4c82-ace4-c36408002400",
    "username": "Eduardo Henrique",
    "email": "edu.slhenrique@gmail.com",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJhdXRoIiwic3ViIjoiZmVkZjYwN2YtMGZkMS00YzgyLWFjZTQtYzM2NDA4MDAyNDAwIiwiZXhwIjoxNzY2NDYwNzUyfQ.UbkVFMbgvJ_DbQ9fFQ3ElRNAImBS8ct7yNmFi4tMVBo"
  },
  "links": null,
  "message": "Auth successfully verified"
}
```
## user
### 游 all
Rota responsavel por listar todos usuarios.

::warning
Esta rota **exige role ADMIN**.
Veja a [regra de neg칩cio](#rn4).
::

```http request
GET http://localhost:8080/users
Authorization: Bearer {token}
```
```json
{
  "data": {
    "items": [
      {
        "createdDate": "2020-01-01T03:00:00.000Z",
        "email": "edu.slhenrique@gmail.com",
        "id": "fedf607f-0fd1-4c82-ace4-c36408002400",
        "role": "ADMIN",
        "status": "OK",
        "username": "Eduardo Henrique"
      }
    ],
    "page": 0,
    "size": 10,
    "total": 1
  },
  "links": {
    "self": "/users?page=0&size=10"
  },
  "message": "Find all users successfully"
}
```
### 游 findOne
Rota responsavel por buscar um usuario por id
```http request
GET http://localhost:8080/users/{id}
Authorization: Bearer {token}
```
```json
{
  "data": {
    "createdDate": "2020-01-01T03:00:00.000Z",
    "email": "edu.slhenrique@gmail.com",
    "id": "fedf607f-0fd1-4c82-ace4-c36408002400",
    "role": "ADMIN",
    "status": "OK",
    "username": "Eduardo Henrique"
  },
  "links": {
    "edit": "/users/fedf607f-0fd1-4c82-ace4-c36408002400",
    "self": "/users/fedf607f-0fd1-4c82-ace4-c36408002400",
    "delete": "/users/fedf607f-0fd1-4c82-ace4-c36408002400"
  },
  "message": "User find successfully"
}
```
### 游 save
Rota responsavel por salvar um novo usu치rio

::warning
Esta rota **n칚o permite** cria칞칚o de usu치rios com role `ADMIN`.
Veja a [regra de neg칩cio](#rn1).
::
::warning
Todo usu치rio 칠 criado bloqueado.
Veja a [regra de neg칩cio](#rn2).
::


```http request
POST http://localhost:8080/users/{id}
Authorization: Bearer {token}

{
"email": "teste@gmail.com","password": "12345678", "username": "Teste", "role": "CRM"
}
```

```json
{
    "data": {
        "createdDate": null,
        "email": "teste@gmail.com",
        "id": "b14be8e7-8a43-42c5-b84a-5f433a4c01a0",
        "role": "CRM",
        "status": "WAITING_CONFIRMATION",
        "username": "Teste"
    },
    "links": {
        "edit": "/users/b14be8e7-8a43-42c5-b84a-5f433a4c01a0",
        "self": "/users/b14be8e7-8a43-42c5-b84a-5f433a4c01a0",
        "delete": "/users/b14be8e7-8a43-42c5-b84a-5f433a4c01a0"
    },
    "message": "User successfully saved"
}
```

### 游댑 confirm
Rota responsavel por confirmar o usu치rio, utilizada no modulo de e-mail

```http request
GET http://localhost:8080/users/confirm/{id}
```

A resposta 칠 um redirect para tela de sucesso.

#### 游 update
Rota responsavel pela edi칞칚o do usu치rio
Campos atualizaveis:
- username
```http request
PUT http://localhost:8080/users/confirm/{id}
Authorization: Bearer {token}
```

```json
{
    "data": {
        "createdDate": "2025-12-23T01:44:58.572Z",
        "email": "teste@gmail.com",
        "id": "b14be8e7-8a43-42c5-b84a-5f433a4c01a0",
        "role": "CRM",
        "status": "OK",
        "username": "teste1"
    },
    "links": {
        "edit": "/users/b14be8e7-8a43-42c5-b84a-5f433a4c01a0",
        "self": "/users/b14be8e7-8a43-42c5-b84a-5f433a4c01a0",
        "delete": "/users/b14be8e7-8a43-42c5-b84a-5f433a4c01a0"
    },
    "message": "User successfully updated"
}
```
### 游 delete
Rota responsavel por deletar um user
```http request
DELETE http://localhost:8080/users/confirm/{id}
Authorization: Bearer {token}
```
```json
{
"data": null,
"links": null,
"message": "User successfully deleted"
}

```

## Regras de Neg칩cio
#### RN1
Usu치rios com role `ADMIN` n칚o podem ser criados via HTTP por quest칫es de seguran칞a.

#### RN2
Todo usu치rio criado permanece bloqueado at칠 confirma칞칚o.

#### RN3
O usu치rio s칩 pode autenticar ap칩s confirma칞칚o.

#### RN4
Apenas usu치rios com role `ADMIN` podem listar todos os usu치rios.

#### RN5
Cada m칩dulo do sistema deve possuir uma role espec칤fica.

## Observa칞칫es
- As roles s칚o definidas no enum `UserRole` e devem ser atualizadas manualmente ao criar novos m칩dulos.
- Caso o m칩dulo de e-mail n칚o seja utilizado, a confirma칞칚o deve ser feita manualmente via endpoint.
